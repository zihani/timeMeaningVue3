/**
 * Copyright (c) Tiny Technologies, Inc. All rights reserved.
 * Licensed under the LGPL or a commercial license.
 * For LGPL see License.txt in the project root for license information.
 * For commercial licenses see https://www.tiny.cloud/
 *
 * Version: 5.0.1 (2019-02-21)
 */
!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),c=tinymce.util.Tools.resolve("tinymce.util.Tools"),s=function(e){return e.getParam("content_style","")},i=function(t){var n="",i=t.dom.encode,e=s(t);n+='<base href="'+i(t.documentBaseURI.getURI())+'">',e&&(n+='<style type="text/css">'+e+"</style>"),c.each(t.contentCSS,function(e){n+='<link type="text/css" rel="stylesheet" href="'+i(t.documentBaseURI.toAbsolute(e))+'">'});var o=t.settings.body_id||"tinymce";-1!==o.indexOf("=")&&(o=(o=t.getParam("body_id","","hash"))[t.id]||o);var r=t.settings.body_class||"";-1!==r.indexOf("=")&&(r=(r=t.getParam("body_class","","hash"))[t.id]||"");var a=t.settings.directionality?' dir="'+t.settings.directionality+'"':"";return"<!DOCTYPE html><html><head>"+n+'</head><style type="text/css">body{font-size:15px;background:#fff;}.btn{display:inline-block;padding:6px 12px;margin-bottom:0;font-size:14px;font-weight:400;line-height:1.42857143;text-align:center;white-space:nowrap;vertical-align:middle;-ms-touch-action:manipulation;touch-action:manipulation;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;background-image:none;border:1px solid transparent;border-radius:4px;background-color:rgba(218,230,236,0.3);border-color:rgba(218,230,236,0.5);margin-right:5px}</style><body id="'+i(o)+'" class="mce-content-body '+i(r)+'"'+i(a)+"><button type='button' class='btn btn-default btn-fullscreen' onclick='fullscreen()'>全屏</button><button class='btn btn-default' onclick='changeSize()'>放大</button><button class='btn btn-default' onclick='changeSize(5)'>缩小</button>"+t.getContent()+'<script>document.addEventListener && document.addEventListener("click", function(e) {for (var elm = e.target; elm; elm = elm.parentNode) {if (elm.nodeName === "A") {e.preventDefault();}}}, false);function fullscreen(){var btn=document.getElementsByClassName("btn-fullscreen")[0];if(!window.isfullscreen){var el=document.documentElement;var rfs=el.requestFullScreen||el.webkitRequestFullScreen||el.mozRequestFullScreen||el.msRequestFullScreen;if(rfs){rfs.call(el)}else{alert("浏览器不支持全屏操作！请使用最新Chrome")}btn.innerText="退出全屏";window.isfullscreen=true;}else{var el=document;var cfs=el.cancelFullScreen||el.webkitCancelFullScreen||el.mozCancelFullScreen||el.exitFullScreen;if(cfs){cfs.call(el)}else{alert("浏览器不支持全屏操作！请使用最新Chrome")};btn.innerText="全屏";window.isfullscreen=false;}}function changeSize(type="big"){var bo=document.getElementsByTagName("body")[0];var size=window.getComputedStyle(bo).fontSize;size=parseInt(size);if(type=="big"){size+=5;bo.style.fontSize=size+"px"}else{if(size<10){alert("再小就看不见了！");return}size-=5;bo.style.fontSize=size+"px"}}<\/script> </body></html>'},t=function(n){n.addCommand("mcePreview",function(){var e,t;t=i(e=n),e.windowManager.open({title:"Preview",size:"large",body:{type:"panel",items:[{name:"preview",type:"iframe",sandboxed:!0}]},buttons:[{type:"cancel",name:"close",text:"Close",primary:!0}],initialData:{preview:t}}).focus("close");$("iframe").attr("allowfullscreen", true)})},n=function(e){e.ui.registry.addButton("preview",{icon:"preview",tooltip:"Preview",onAction:function(){return e.execCommand("mcePreview")}}),e.ui.registry.addMenuItem("preview",{icon:"preview",text:"Preview",onAction:function(){return e.execCommand("mcePreview")}})};e.add("preview",function(e){t(e),n(e)}),function o(){}}();